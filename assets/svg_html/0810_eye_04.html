<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <link rel="stylesheet" href="./index.css">
  <script src="./gsap.min.js"></script>
  <script src="./api.js"></script>

  <title></title>
</head>

<body>
    <svg width="400" height="400" viewBox="0 0 400 400" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect width="400" height="400" fill="#FF6958"/>
    <circle id="white-circle" cx="200" cy="200" r="200" fill="white"/>
    <mask id="ignore" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="400" height="400">
        <use href="#white-circle"/>
    </mask>
    <circle id="blue-circle" cx="200" cy="200" r="104" fill="#54B5CA" mask="url(#ignore)"/>
    <circle id="black-circle" cx="200" cy="200" r="49" fill="#070210" mask="url(#ignore)"/>
</svg>
    <br>
    <button onclick="play()">Play</button>
    <script id="svg-script">
      // Select the SVG elements
const whiteCircle = document.querySelector('#white-circle');
const blueCircle = document.querySelector('#blue-circle');
const blackCircle = document.querySelector('#black-circle');

// Create a timeline object
const tl = createTimeline();

// Compute necessary variables with reasoning
const whiteCircleSize = getSize(whiteCircle).width;
const blueCircleSize = getSize(blueCircle).width;
const blackCircleSize = getSize(blackCircle).width;

const whiteCircleCenterX = getCenterPosition(whiteCircle).x;
const blueCircleCenterX = getCenterPosition(blueCircle).x;
const blackCircleCenterX = getCenterPosition(blackCircle).x;

// Correctly compute translation distances
const leftAlignDistanceBlue = - (blueCircleCenterX - whiteCircleCenterX) - whiteCircleSize / 2 + blueCircleSize / 2;
const leftAlignDistanceBlack = - (blackCircleCenterX - whiteCircleCenterX) - whiteCircleSize / 2 + blackCircleSize / 2;
const rightAlignDistanceBlue = - (blueCircleCenterX - whiteCircleCenterX) + whiteCircleSize / 2 - blueCircleSize / 2;
const rightAlignDistanceBlack = - (blackCircleCenterX - whiteCircleCenterX) + whiteCircleSize / 2 - blackCircleSize / 2;
const centerDistanceBlue = whiteCircleCenterX - blueCircleCenterX;
const centerDistanceBlack = whiteCircleCenterX - blackCircleCenterX;

// Create the animation step by step
scale(tl, whiteCircle, 0.6, 1, 0.1, 0, '50%', '50%', null, null, 'power2.in'); // **Scale the white circle in y to 0.1 in 0.6 seconds using easing power2.in for blink effect**
scale(tl, whiteCircle, 0.6, 1, 1, 0.6, '50%', '50%', null, null, 'power2.out'); // **Scale back up using easing power2.out for blink effect**
scale(tl, whiteCircle, 0.6, 1, 0.1, 1.2, '50%', '50%', null, null, 'power2.in'); // **Repeat scale down for blink effect**
scale(tl, whiteCircle, 0.6, 1, 1, 1.8, '50%', '50%', null, null, 'power2.out'); // **Repeat scale up for blink effect**

translate(tl, blueCircle, 0.5, leftAlignDistanceBlue, 0, 2.4); // **Move blue circle to align left edge with white circle**
translate(tl, blackCircle, 0.5, leftAlignDistanceBlack, 0, 2.4); // **Move black circle to align left edge with white circle**

translate(tl, blueCircle, 0.5, rightAlignDistanceBlue - leftAlignDistanceBlue, 0, 2.9); // **Move blue circle to align right edge with white circle**
translate(tl, blackCircle, 0.5, rightAlignDistanceBlack - leftAlignDistanceBlack, 0, 2.9); // **Move black circle to align right edge with white circle**

translate(tl, blueCircle, 0.5, centerDistanceBlue, 0, 3.4); // **Move blue circle to center of white circle**
translate(tl, blackCircle, 0.5, centerDistanceBlack, 0, 3.4); // **Move black circle to center of white circle**

scale(tl, whiteCircle, 0.6, 1, 0.1, 3.9, '50%', '50%', null, null, 'power2.in'); // **Scale the white circle in y to 0.1 using easing power2.in for blink effect**
scale(tl, whiteCircle, 0.6, 1, 1, 4.5, '50%', '50%', null, null, 'power2.out'); // **Scale back up using easing power2.out for blink effect**
    </script>
    <script src="./vis.js"></script>
  </body>
</html>
